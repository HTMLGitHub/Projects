/**
 * 
 */
package service;

import java.util.List;

import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.stereotype.Service;

import engine.InventoryItem;
import engine.Item;
import repository.InventoryItemRepository;

/**
 * @author bak12
 *
 */
@Service("InventoryItemService")
public class InventoryItemServiceImpl implements InventoryItemService
{
	@Autowired
	public InventoryItemRepository inventoryItemRepo;
	private ItemService itemService;
	

	@Override
	public boolean createInventoryItem(InventoryItem ii)
	{
		if(itemService.createItem(new Item(ii.getId(), ii.getDetails().getName(), ii.getDetails().getPluralName())))
		{
			return inventoryItemRepo.createInventoryItem(ii);
		}
		return false;
	}

	@Override
	public boolean updateInventoryItem(InventoryItem ii)
	{
		if(itemService.updateItem(new Item(ii.getId(), ii.getDetails().getName(), ii.getDetails().getPluralName())))
		{
			return inventoryItemRepo.updateInventoryItem(ii);
		}
		return false;
	}

	@Override
	public boolean deleteInventoryItem(InventoryItem ii)
	{
		if(itemService.deleteItem(new Item(ii.getId(), ii.getDetails().getName(), ii.getDetails().getPluralName())))
		{
			return inventoryItemRepo.removeInventoryItem(ii);
		}		
		return false;
	}

	@Override
	public InventoryItem findInventoryItemById(int Id)
	{
		InventoryItem ii = inventoryItemRepo.findInventoryItemById(Id);
		if(ii!=null)
		{
			Item item = itemService.findItemById(ii.getId());
			
			ii.setDetails(new Item(item.getId(), item.getName(), item.getPluralName()));
			return ii;
		}
		return null;
	}

	@Override
	public List<InventoryItem> findAllInventoryItems()
	{
		List<Item> items = itemService.findAllItems();
		List<InventoryItem> iis = inventoryItemRepo.getAllInventoryItems();
		if(!items.isEmpty() && !iis.isEmpty())
		{
			for(Item i: items)for(InventoryItem ii: iis)
			{
				if(i.getId()==ii.getId())
				{
					i.setName(ii.getDetails().getName());
					i.setPluralName(ii.getDetails().getPluralName());
				}
			}
			return iis;
		}
		return null;
	}

}
